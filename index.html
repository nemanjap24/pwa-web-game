<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Add these new meta tags -->
    <meta name="theme-color" content="#4c5eb3" />
    <meta name="description" content="A ball rolling puzzle game" />

    <!-- Add manifest link -->
    <link rel="manifest" href="manifest.json" />

    <!-- Add iOS meta tags and icons -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Ball Game" />
    <link rel="apple-touch-icon" href="icons/icon_152x152.png" />

    <title>Baller</title>

    <link rel="stylesheet" type="text/css" href="style.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />

    <script src="libraries/p5.min.js"></script>
    <script src="libraries/p5.sound.min.js"></script>
    <script src="libraries/jquery-3.7.1.min.js"></script>
  </head>

  <body>
    <div id="main-container">
      <div id="canvas-container">
        <div id="controls">
          <button id="next-level">Next Level</button>
          <button id="help-button">Help <i class="fa-solid fa-question"></i></button>
        </div>
      </div>
      <div id="difficulty-container">
        <button id="btn-easy">Easy</button>
        <button id="btn-medium">Medium</button>
        <button id="btn-hard">Hard</button>
      </div>
    </div>

    <div id="orientation-overlay" class="overlay">
      <div class="overlay-content">
        <h2>Device orientation data access required</h2>
        <p>This game requires device orientation access to play on mobile devices.</p>
        <button id="enable-orientation">Enable Device Motion</button>
      </div>
    </div>
    <div id="help-overlay" class="overlay">
      <div class="overlay-content">
        <h2>How to Play</h2>
        <p>Tilt your device or use WASD to move the <span class="ball">ball</span></p>
        <p>Collect all coins ðŸª™ before reaching the finish line (black circle).</p>
        <p>Avoid <span class="obstacle">obstacles</span>(blue squares) - they will reset your position</p>
        <button id="close-help">Close</button>
      </div>
    </div>
    <div id="rotate-overlay" class="overlay">
      <div class="overlay-content">
        <h2>Please Rotate Your Device</h2>
        <p>This game works best in portrait mode</p>
        <i class="fa-solid fa-rotate fa-2x"></i>
      </div>
    </div>
    <div id="unlocked-overlay-easy" class="overlay" style="display: none">
      <div class="overlay-content">
        <h2>Congratulations!</h2>
        <p>You have beaten Easy difficulty and unlocked Medium difficulty!</p>
        <button id="close-unlocked-overlay-easy">Close</button>
      </div>
    </div>
    <div id="unlocked-overlay-medium" class="overlay" style="display: none">
      <div class="overlay-content">
        <h2>Congratulations!</h2>
        <p>You have beaten Medium difficulty and unlocked Hard difficulty!</p>
        <button id="close-unlocked-overlay-medium">Close</button>
      </div>
    </div>
    <div id="congratulations-overlay" class="overlay" style="display: none">
      <div class="overlay-content">
        <h2>Congratulations!</h2>
        <p>You have beaten the Hard difficulty. Youâ€™ve completed the game!</p>
        <button id="close-congratulations-overlay">Close</button>
      </div>
    </div>

    <script src="CollisionDetector.js"></script>
    <script src="GameObjects/Finish.js"></script>
    <script src="GameObjects/Wall.js"></script>
    <script src="GameObjects/Obstacle.js"></script>
    <script src="GameObjects/Coin.js"></script>
    <script src="GameObjects/Ball.js"></script>
    <script src="sketch.js"></script>

    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/~xsith/gyro-test/service-worker.js")
            .then((registration) => {
              console.log("ServiceWorker registration successful");
            })
            .catch((err) => {
              console.log("ServiceWorker registration failed: ", err);
            });
        });
      }
    </script>
  </body>
</html>
